{
  "permissions": {
    "allow": [
      "Bash(start:*)",
      "Bash(tree \"D:\\Projects\\Emuera\\Emuera\" /F:*)",
      "Bash(cat \"/d/Projects/Emuera/Emuera.sln\":*)",
      "Bash(cat:*)",
      "Bash(git init:*)",
      "Bash(swift build -v)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git rm:*)",
      "Bash(git remote add:*)",
      "Bash(git branch:*)",
      "Bash(swift build:*)",
      "Bash(find:*)",
      "Bash(swift package:*)",
      "Bash(swift test --list-tests)",
      "Bash(.build/debug/emuera:*)",
      "Bash(xxd:*)",
      "Bash(perl -i -pe:*)",
      "Bash(printf '%s' '//\n//  LexicalAnalyzer.swift\n//  EmueraCore\n//  MVPç‰ˆè¯æ³•åˆ†æžå™¨\n//  Created: 2025-12-18\n//\n\nimport Foundation\n\npublic struct LexicalAnalyzer {\n    public func tokenize(_ source: String) -> [TokenType.Token] {\n        var tokens: [TokenType.Token] = []\n        var index = source.startIndex\n        var line = 1\n\n        while index < source.endIndex {\n            let c = source[index]\n\n            // ç©ºç™½å¤„ç†\n            if c.isWhitespace {\n                if c == \"\"\\n\"\" {\n                    line += 1\n                    tokens.append(TokenType.Token(type: .lineBreak, value: \"\"\\n\"\", position: ScriptPosition(filename: \"\"script\"\", lineNumber: line)))\n                }\n                source.formIndex(after: &index)\n                continue\n            }\n\n            // æ³¨é‡Š\n            if c == \"\";\"\" {\n                while index < source.endIndex && source[index] != \"\"\\n\"\" {\n                    source.formIndex(after: &index)\n                }\n                continue\n            }\n\n            // å­—ç¬¦ä¸²\n            if c == \"\"\\\"\"\"\" {\n                let start = source.index(after: index)\n                var current = start\n                while current < source.endIndex && source[current] != \"\"\\\"\"\"\" {\n                    source.formIndex(after: Â¤t)\n                }\n                if current < source.endIndex {\n                    let value = String(source[start..<current])\n                    let token = TokenType.Token(type: .string(value), value: value, position: ScriptPosition(filename: \"\"script\"\", lineNumber: line))\n                    tokens.append(token)\n                    index = source.index(after: current)\n                    continue\n                }\n            }\n\n            // æ•°å­—\n            if c.isNumber {\n                var current = index\n                var digits = \"\"\"\"\n                while current < source.endIndex && source[current].isNumber {\n                    digits.append(source[current])\n                    source.formIndex(after: Â¤t)\n                }\n                if let value = Int64(digits) {\n                    tokens.append(TokenType.Token(type: .integer(value), value: digits, position: ScriptPosition(filename: \"\"script\"\", lineNumber: line)))\n                }\n                index = current\n                continue\n            }\n\n            // æ ‡è¯†ç¬¦\n            if c.isLetter || c == \"\"$\"\" || c == \"\"%\"\" || c == \"\"@\"\" {\n                var current = index\n                var identifier = \"\"\"\"\n                while current < source.endIndex {\n                    let ch = source[current]\n                    if ch.isLetter || ch.isNumber || ch == \"\"_\"\" || ch == \"\"$\"\" || ch == \"\"%\"\" || ch == \"\":\"\" {\n                        identifier.append(ch)\n                        source.formIndex(after: Â¤t)\n                    } else {\n                        break\n                    }\n                }\n\n                let tokenType: TokenType\n                let upper = identifier.uppercased()\n                if [\"\"PRINT\"\", \"\"PRINTL\"\", \"\"PRINTW\"\", \"\"INPUT\"\", \"\"WAIT\"\", \"\"QUIT\"\"].contains(upper) {\n                    tokenType = .command(identifier)\n                } else if identifier.hasPrefix(\"\"$\"\") || identifier.hasPrefix(\"\"%\"\") {\n                    tokenType = .variable(identifier)\n                } else if identifier.hasPrefix(\"\"@\"\") {\n                    tokenType = .label(identifier)\n                } else if [\"\"ABS\"\", \"\"SQRT\"\", \"\"SIN\"\"].contains(upper) {\n                    tokenType = .function(identifier)\n                } else if [\"\"IF\"\", \"\"ELSE\"\", \"\"FOR\"\"].contains(upper) {\n                    tokenType = .keyword(identifier)\n                } else {\n                    tokenType = .string(identifier)\n                }\n\n                tokens.append(TokenType.Token(type: tokenType, value: identifier, position: ScriptPosition(filename: \"\"script\"\", lineNumber: line)))\n                index = current\n                continue\n            }\n\n            // æ“ä½œç¬¦\n            let nextIndex = source.index(after: index)\n            let twoChar = nextIndex < source.endIndex ? String([c, source[nextIndex]]) : \"\"\"\"\n\n            if twoChar != \"\"\"\" {\n                if let op = TokenType.Operator(rawValue: twoChar) {\n                    tokens.append(TokenType.Token(type: .operatorSymbol(op), value: twoChar, position: ScriptPosition(filename: \"\"script\"\", lineNumber: line)))\n                    index = nextIndex\n                    source.formIndex(after: &index)\n                    continue\n                }\n\n                if let comp = TokenType.Comparator(rawValue: twoChar) {\n                    tokens.append(TokenType.Token(type: .comparator(comp), value: twoChar, position: ScriptPosition(filename: \"\"script\"\", lineNumber: line)))\n                    index = nextIndex\n                    source.formIndex(after: &index)\n                    continue\n                }\n            }\n\n            if let op = TokenType.Operator(rawValue: String(c)) {\n                tokens.append(TokenType.Token(type: .operatorSymbol(op), value: String(c), position: ScriptPosition(filename: \"\"script\"\", lineNumber: line)))\n                source.formIndex(after: &index)\n                continue\n            }\n            if let comp = TokenType.Comparator(rawValue: String(c)) {\n                tokens.append(TokenType.Token(type: .comparator(comp), value: String(c), position: ScriptPosition(filename: \"\"script\"\", lineNumber: line)))\n                source.formIndex(after: &index)\n                continue\n            }\n\n            // æ ‡ç‚¹\n            switch c {\n            case \"\",\"\":\n                tokens.append(TokenType.Token(type: .comma, value: \"\",\"\", position: ScriptPosition(filename: \"\"script\"\", lineNumber: line)))\n            case \"\":\"\":\n                tokens.append(TokenType.Token(type: .colon, value: \"\":\"\", position: ScriptPosition(filename: \"\"script\"\", lineNumber: line)))\n            case \"\"(\"\":\n                tokens.append(TokenType.Token(type: .parenthesisOpen, value: \"\"(\"\", position: ScriptPosition(filename: \"\"script\"\", lineNumber: line)))\n            case \"\")\"\":\n                tokens.append(TokenType.Token(type: .parenthesisClose, value: \"\")\"\", position: ScriptPosition(filename: \"\"script\"\", lineNumber: line)))\n            case \"\"[\"\":\n                tokens.append(TokenType.Token(type: .bracketOpen, value: \"\"[\"\", position: ScriptPosition(filename: \"\"script\"\", lineNumber: line)))\n            case \"\"]\"\":\n                tokens.append(TokenType.Token(type: .bracketClose, value: \"\"]\"\", position: ScriptPosition(filename: \"\"script\"\", lineNumber: line)))\n            default:\n                break\n            }\n            source.formIndex(after: &index)\n        }\n\n        return tokens\n    }\n}\n')",
      "Bash(nano:*)",
      "Bash(pkill:*)",
      "Bash(clear:*)",
      "Bash(python3:*)",
      "Bash(swift test:*)",
      "Bash(.build/debug/emuera <<'EOF'\ntest\nquit\nEOF)",
      "Bash(chmod:*)",
      "Bash(swift ExprTest.swift:*)",
      "Bash(__NEW_LINE__ cd /Users/ss/Documents/Project/iOS/emuera-mac/Emuera echo 'PRINT A')",
      "Bash(xargs git status:*)",
      "Bash(cd /Users/ss/Documents/Project/iOS/emuera-mac/Emuera:*)",
      "Bash(pwd ls Sources/EmueraCore/Parser/ExpressionParser.swift Sources/EmueraCore/Executor/ExpressionEvaluator.swift Sources/EmueraCore/Executor/SimpleExecutor.swift Sources/EmueraCore/ScriptEngine.swift)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nfeat: å®žçŽ°è¡¨è¾¾å¼è§£æžå™¨å’Œæ±‚å€¼å™¨ï¼Œæ”¯æŒå¤æ‚ç®—æœ¯è¿ç®—\n\næ ¸å¿ƒåŠŸèƒ½ï¼š\n- ExpressionParser: é€’å½’ä¸‹é™è§£æžå™¨ï¼Œæ”¯æŒè¿ç®—ç¬¦ä¼˜å…ˆçº§\n- ExpressionEvaluator: æ‰§è¡ŒASTèŠ‚ç‚¹ï¼Œæ”¯æŒå®Œæ•´ç®—æœ¯è¿ç®—\n- SimpleExecutor: é›†æˆè¡¨è¾¾å¼å¼•æ“Žï¼Œæ”¯æŒ A = 10 + 20 * 3\n- ScriptEngine: æ·»åŠ æŒä¹…çŠ¶æ€æ”¯æŒï¼Œè·¨è„šæœ¬å˜é‡ä¿æŒ\n\næ–°å¢žç‰¹æ€§ï¼š\nâœ… ç®—æœ¯è¿ç®—: + - * / % ** \\(æ”¯æŒä¼˜å…ˆçº§\\)\nâœ… æ‹¬å·ä¼˜å…ˆçº§: \\(10 + 20\\) * 3\nâœ… å˜é‡å¼•ç”¨: A = X + Y\nâœ… æŒä¹…çŠ¶æ€: é»˜è®¤å¼€å¯ï¼Œå˜é‡è·¨è„šæœ¬ä¿æŒ\nâœ… çŠ¶æ€ç®¡ç†: reset/persist on/off å‘½ä»¤\n\nå‘¨è¾¹æ”¹è¿›ï¼š\n- TokenType: è¿ç®—ç¬¦ä¼˜å…ˆçº§å’Œç±»åž‹åˆ¤æ–­æ–¹æ³•\n- main.swift: æ”¯æŒè£¸å˜é‡è¯»å–ï¼Œæ–°å¢žreset/persistå‘½ä»¤\n\nðŸ¤– Generated with [Claude Code]\\(https://claude.com/claude-code\\)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(__NEW_LINE__ echo \"=== æµ‹è¯•2: åŒä¸€æ‰§è¡Œæµç¨‹ä¸­çš„å˜é‡ä¿æŒ ===\")",
      "Bash(__NEW_LINE__ echo \"=== æµ‹è¯•3: å•ç‹¬è¾“å‡ºéªŒè¯ ===\")",
      "Bash(__NEW_LINE__ echo \"\")",
      "Bash(__NEW_LINE__ echo \"=== æµ‹è¯•5: æ£€æŸ¥TOKENåºåˆ— ===\")",
      "Bash(swift /Users/ss/Documents/Project/iOS/emuera-mac/VerifyPersistent.swift)",
      "Bash(cd Emuera echo \"=== æµ‹è¯•Step 1: å˜é‡èµ‹å€¼ ===\" { echo \"A = 100\" sleep 0.5 echo \"quit\" })",
      "Bash(swift:*)",
      "Bash(bash /Users/ss/Documents/Project/iOS/emuera-mac/test_interactive.sh 2>&1:*)",
      "Bash(wc:*)",
      "Bash(git -C /Users/ss/Documents/Project/Games/Emuera log --oneline -5)",
      "Bash(swiftc:*)",
      "Bash(ln -sf:*)",
      "Bash(ls:*)",
      "Bash(git status:*)"
    ]
  }
}
